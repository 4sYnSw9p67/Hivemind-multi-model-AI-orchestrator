<!-- Worker Responses - Modern Design -->
<div class="responses-panel">
  <!-- Header Section -->
  <header class="panel-header">
    <div class="header-content">
      <h2 class="header-title">Model Responses</h2>
      <p class="header-subtitle">Individual AI model outputs and ratings</p>
    </div>
    <div class="response-count">
      <span class="count-badge">{{ responses.length }}</span>
    </div>
  </header>
  
  <!-- Responses Container -->
  <section class="responses-container">
    <!-- Empty State -->
    <div *ngIf="responses.length === 0" class="empty-state">
      <div class="empty-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          <circle cx="9" cy="10" r="1"/>
          <circle cx="15" cy="10" r="1"/>
          <path d="M9 13s1.5 2 3 2 3-2 3-2"/>
        </svg>
      </div>
      <h3 class="empty-title">No responses yet</h3>
      <p class="empty-description">AI model responses will appear here when you start a conversation</p>
    </div>
    
    <!-- Response Cards -->
    <div class="responses-list">
      <div 
        class="response-card animate-fade-in" 
        *ngFor="let response of responses; trackBy: trackByResponseId"
        [class.has-error]="response.error"
        [class.is-rated]="response.rating"
      >
        <!-- Card Header -->
        <div class="card-header">
          <div class="model-info">
            <div class="model-avatar" [attr.data-model]="response.model">
              <!-- OpenAI GPT models - Single node with connections -->
              <svg *ngIf="response.model.includes('gpt')" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3" fill="currentColor"/>
                <path d="M12 3v6M12 15v6M3 12h6M15 12h6"/>
                <circle cx="12" cy="3" r="1" fill="currentColor"/>
                <circle cx="21" cy="12" r="1" fill="currentColor"/>
                <circle cx="12" cy="21" r="1" fill="currentColor"/>
                <circle cx="3" cy="12" r="1" fill="currentColor"/>
              </svg>
              <!-- Claude models - Triangular node network -->
              <svg *ngIf="response.model.includes('claude')" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="2.5" fill="currentColor"/>
                <path d="M12 6l-5.2 9h10.4z"/>
                <circle cx="12" cy="6" r="1" fill="currentColor"/>
                <circle cx="6.8" cy="15" r="1" fill="currentColor"/>
                <circle cx="17.2" cy="15" r="1" fill="currentColor"/>
                <path d="M12 9.5v2.5M9.5 13.5l2.5-1.5M14.5 13.5l-2.5-1.5"/>
              </svg>
              <!-- LLaMA models - Square node grid -->
              <svg *ngIf="response.model.includes('llama')" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="2.5" fill="currentColor"/>
                <path d="M6 6h12v12H6z"/>
                <circle cx="6" cy="6" r="1" fill="currentColor"/>
                <circle cx="18" cy="6" r="1" fill="currentColor"/>
                <circle cx="18" cy="18" r="1" fill="currentColor"/>
                <circle cx="6" cy="18" r="1" fill="currentColor"/>
                <path d="M8.5 8.5l3.5 3.5M15.5 8.5l-3.5 3.5M8.5 15.5l3.5-3.5M15.5 15.5l-3.5-3.5"/>
              </svg>
              <!-- DeepSeek models - Hexagonal node network -->
              <svg *ngIf="response.model.includes('deepseek')" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="2.5" fill="currentColor"/>
                <polygon points="12,3 18,7.5 18,16.5 12,21 6,16.5 6,7.5"/>
                <circle cx="12" cy="3" r="1" fill="currentColor"/>
                <circle cx="18" cy="7.5" r="1" fill="currentColor"/>
                <circle cx="18" cy="16.5" r="1" fill="currentColor"/>
                <circle cx="12" cy="21" r="1" fill="currentColor"/>
                <circle cx="6" cy="16.5" r="1" fill="currentColor"/>
                <circle cx="6" cy="7.5" r="1" fill="currentColor"/>
                <path d="M12 6v3M15 13.5l-3-1.5M9 13.5l3-1.5M12 15v3M15 10.5l-3 1.5M9 10.5l3 1.5"/>
              </svg>
              <!-- Generic/fallback - Simple node with minimal connections -->
              <svg *ngIf="!response.model.includes('gpt') && !response.model.includes('claude') && !response.model.includes('llama') && !response.model.includes('deepseek')" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3" fill="currentColor"/>
                <path d="M12 6v3M18 12h-3M12 15v3M6 12h3"/>
                <circle cx="12" cy="6" r="1" fill="currentColor"/>
                <circle cx="18" cy="12" r="1" fill="currentColor"/>
                <circle cx="12" cy="18" r="1" fill="currentColor"/>
                <circle cx="6" cy="12" r="1" fill="currentColor"/>
              </svg>
            </div>
            <div class="model-details">
              <span class="model-name">{{ getModelDisplayName(response.model) }}</span>
              <span class="response-time">{{ response.timestamp | date:'HH:mm:ss' }}</span>
            </div>
          </div>
          
          <div class="response-actions">
            <button 
              (click)="rateResponse(response, 'good')"
              [class.active]="response.rating === 'good'"
              class="btn btn-ghost btn-sm rating-button good"
              title="Good response"
            >
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/>
              </svg>
            </button>
            <button 
              (click)="rateResponse(response, 'bad')"
              [class.active]="response.rating === 'bad'"
              class="btn btn-ghost btn-sm rating-button bad"
              title="Poor response"
            >
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"/>
              </svg>
            </button>
          </div>
        </div>
        
        <!-- Query Context (if available) -->
        <div class="query-context" *ngIf="response.query">
          <div class="context-label">Query</div>
          <div class="context-text">{{ response.query }}</div>
        </div>
        
        <!-- Response Content -->
        <div class="response-content">
          <!-- Error State -->
          <div *ngIf="response.error" class="error-content">
            <div class="error-header">
              <svg viewBox="0 0 24 24" fill="currentColor" class="error-icon">
                <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
              </svg>
              <span class="error-title">Error</span>
            </div>
            <div class="error-message">{{ response.error }}</div>
          </div>
          
          <!-- Success State -->
          <div *ngIf="!response.error" class="success-content">
            <div class="content-text" [innerHTML]="formatResponse(response.output || '')"></div>
          </div>
        </div>
        
        <!-- Response Metadata -->
        <div class="response-meta" *ngIf="response.processingTime || response.confidence">
          <div class="meta-items">
            <div class="meta-item" *ngIf="response.processingTime">
              <svg viewBox="0 0 24 24" fill="currentColor" class="meta-icon">
                <path d="M15,1H9V3H15M11,14H13V8H11M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39M12,20A7,7 0 0,1 5,13A7,7 0 0,1 12,6A7,7 0 0,1 19,13A7,7 0 0,1 12,20Z"/>
              </svg>
              <span class="meta-value">{{ response.processingTime }}ms</span>
            </div>
            <div class="meta-item" *ngIf="response.confidence">
              <svg viewBox="0 0 24 24" fill="currentColor" class="meta-icon">
                <path d="M23,12L20.56,9.22L20.9,5.54L17.29,4.72L15.4,1.54L12,3L8.6,1.54L6.71,4.72L3.1,5.53L3.44,9.21L1,12L3.44,14.78L3.1,18.47L6.71,19.29L8.6,22.47L12,21L15.4,22.46L17.29,19.28L20.9,18.46L20.56,14.78L23,12M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
              </svg>
              <span class="meta-value">{{ response.confidence }}%</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Analytics Section -->
  <footer class="analytics-section" *ngIf="responses.length > 0">
    <div class="analytics-header">
      <h3 class="analytics-title">Performance</h3>
    </div>
    
    <div class="analytics-grid">
      <div class="analytics-card">
        <div class="analytics-value">{{ getSuccessRate() }}%</div>
        <div class="analytics-label">Success Rate</div>
        <div class="analytics-trend">
          <svg viewBox="0 0 24 24" fill="currentColor" class="trend-icon">
            <path d="M16,6L18.29,8.29L13.41,13.17L9.41,9.17L2,16.59L3.41,18L9.41,12L13.41,16L19.71,9.71L22,12V6H16Z"/>
          </svg>
        </div>
      </div>
      
      <div class="analytics-card">
        <div class="analytics-value">{{ getAverageResponseTime() }}</div>
        <div class="analytics-label">Avg Time</div>
        <div class="analytics-unit">ms</div>
      </div>
      
      <div class="analytics-card">
        <div class="analytics-value">{{ getBestModel() }}</div>
        <div class="analytics-label">Top Model</div>
        <div class="analytics-badge">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M5,16L3,14L5,12L4,11L1,14L4,17M9,10L12,7L15,10L14,11L12,9L10,11M19,14L17,12L19,10L20,11L23,14L20,17M15,14L12,17L9,14L10,13L12,15L14,13"/>
          </svg>
        </div>
      </div>
    </div>
  </footer>
</div>
