<!-- Agent Creator - Modern Design -->
<div class="agent-creator">
  <!-- Header Section -->
  <header class="creator-header">
    <div class="header-content">
      <h2 class="header-title">AI Agents</h2>
      <p class="header-subtitle">Configure and manage your AI model instances</p>
    </div>
  </header>

  <!-- Agent Creation Form -->
  <section class="creation-form">
    <div class="form-header">
      <h3 class="form-title">Create New Agent</h3>
    </div>
    
    <div class="form-content">
      <div class="form-group">
        <label for="agent-name" class="form-label">
          Agent Name
          <span class="required">*</span>
        </label>
        <div class="select-wrapper">
          <select id="agent-name" [(ngModel)]="newAgent.name" class="form-control">
            <option *ngFor="let name of getAvailableNames()" [value]="name">{{ name }}</option>
          </select>
          <svg class="select-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </div>
      </div>
      
      <div class="form-group">
        <label for="agent-model" class="form-label">
          AI Model
          <span class="required">*</span>
        </label>
        <div class="select-wrapper">
          <select id="agent-model" [(ngModel)]="newAgent.model" class="form-control">
            <option value="qwen">Qwen (Local)</option>
          </select>
          <svg class="select-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </div>
      </div>
      
      <div class="form-group">
        <label for="agent-specialization" class="form-label">
          Specialization
          <span class="required">*</span>
        </label>
        <div class="select-wrapper">
          <select id="agent-specialization" [(ngModel)]="newAgent.specialization" (change)="onSpecializationChange()" class="form-control">
            <option *ngFor="let spec of getAvailableSpecializations()" [value]="spec.description">
              {{ spec.name }}
            </option>
            <option value="custom">Custom Specialization...</option>
          </select>
          <svg class="select-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </div>
        
        <!-- Custom specialization textarea -->
        <div class="form-group mt-3" *ngIf="isCustomSpecialization">
          <label for="custom-specialization" class="form-label">
            Custom Specialization
          </label>
          <textarea 
            id="custom-specialization"
            [(ngModel)]="newAgent.customSpecialization"
            placeholder="Describe your custom specialization approach..."
            class="form-control"
            rows="3"
          ></textarea>
        </div>
        
        <!-- Specialization description -->
        <div class="specialization-description" *ngIf="!isCustomSpecialization && newAgent.specialization">
          <small class="text-muted">{{ newAgent.specialization }}</small>
        </div>
      </div>

      <!-- Response Length Control -->
      <div class="form-group">
        <label for="response-length" class="form-label">
          Response Length
        </label>
        <div class="select-wrapper">
          <select id="response-length" [(ngModel)]="newAgent.responseLength" class="form-control">
            <option *ngFor="let option of responseLengthOptions" [value]="option.value">
              {{ option.label }} - {{ option.description }}
            </option>
          </select>
          <svg class="select-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </div>
      </div>

      <!-- Worker Parameters -->
      <div class="parameters-section">
        <h4 class="parameters-title">Worker Parameters</h4>
        <div class="parameters-grid">
          <div class="param-group">
            <label for="temperature" class="param-label">
              Temperature
              <span class="param-value">{{ newAgent.temperature }}</span>
            </label>
            <input 
              id="temperature"
              type="range" 
              [(ngModel)]="newAgent.temperature"
              min="0.1"
              max="1.5"
              step="0.1"
              class="param-slider"
            />
            <div class="param-range">
              <span>0.1 (Conservative)</span>
              <span>1.5 (Creative)</span>
            </div>
          </div>

          <div class="param-group">
            <label for="top_k" class="param-label">
              Top K
              <span class="param-value">{{ newAgent.top_k }}</span>
            </label>
            <input 
              id="top_k"
              type="range" 
              [(ngModel)]="newAgent.top_k"
              min="10"
              max="100"
              step="5"
              class="param-slider"
            />
            <div class="param-range">
              <span>10 (Focused)</span>
              <span>100 (Diverse)</span>
            </div>
          </div>

          <div class="param-group">
            <label for="top_p" class="param-label">
              Top P
              <span class="param-value">{{ newAgent.top_p }}</span>
            </label>
            <input 
              id="top_p"
              type="range" 
              [(ngModel)]="newAgent.top_p"
              min="0.1"
              max="1.0"
              step="0.05"
              class="param-slider"
            />
            <div class="param-range">
              <span>0.1 (Precise)</span>
              <span>1.0 (Exploratory)</span>
            </div>
          </div>
        </div>
      </div>
      
      <button 
        (click)="createAgent()" 
        [disabled]="!canCreateAgent()"
        class="btn btn-primary create-button"
      >
        <svg viewBox="0 0 24 24" fill="currentColor" class="button-icon">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
        Create Agent
      </button>
    </div>
  </section>
  
  <!-- Active Agents List -->
  <section class="agents-section">
    <div class="section-header">
      <h3 class="section-title">Active Agents</h3>
      <div class="agents-count">
        <span class="count-badge">{{ agents.length }}</span>
      </div>
    </div>
    
    <div class="agents-list">
      <!-- Empty State -->
      <div class="empty-state" *ngIf="agents.length === 0">
        <div class="empty-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
        </div>
        <p class="empty-text">No agents created yet</p>
        <p class="empty-subtext">Create your first AI agent to get started</p>
      </div>

      <!-- Agent Cards -->
      <div class="agent-card" *ngFor="let agent of agents; trackBy: trackAgent" [class.animate-fade-in]="true">
        <div class="card-header">
          <div class="agent-avatar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <!-- Worker node with connections -->
              <circle cx="12" cy="12" r="3" fill="currentColor"/>
              <path d="M12 6v3M18 12h-3M12 15v3M6 12h3"/>
              <circle cx="12" cy="6" r="1" fill="currentColor"/>
              <circle cx="18" cy="12" r="1" fill="currentColor"/>
              <circle cx="12" cy="18" r="1" fill="currentColor"/>
              <circle cx="6" cy="12" r="1" fill="currentColor"/>
            </svg>
          </div>
          <div class="agent-status">
            <span class="status-indicator online"></span>
          </div>
        </div>
        
        <div class="card-content">
          <h4 class="agent-name">{{ agent.name }}</h4>
          <div class="agent-model">
            <span class="model-badge">{{ getModelDisplayName(agent.model) }}</span>
          </div>
          <div class="agent-params">
            <span class="param-chip">T: {{ agent.workerParams.temperature }}</span>
            <span class="param-chip">K: {{ agent.workerParams.top_k }}</span>
            <span class="param-chip">P: {{ agent.workerParams.top_p }}</span>
            <span class="param-chip length-chip">{{ getResponseLengthLabel(agent.responseLength) }}</span>
          </div>
          <p class="agent-description" *ngIf="agent.specialization">
            {{ agent.specialization }}
          </p>
        </div>
        
        <div class="card-actions">
          <button 
            (click)="removeAgent(agent.id)" 
            class="btn btn-ghost btn-sm remove-button"
            title="Remove agent"
          >
            <svg viewBox="0 0 24 24" fill="currentColor" class="button-icon">
              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </section>
</div>
